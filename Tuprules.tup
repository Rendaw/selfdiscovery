OUTPUT=selfdiscovery

COMPILEFLAGS = -std=c++0x -Wall -pedantic @(CFLAGS)
ifeq (@(DEBUG),true)
	COMPILEFLAGS += -ggdb -O0
else
	COMPILEFLAGS += -O3 -DNDEBUG
endif
ifeq (@(PLATFORM),windows)
	COMPILEFLAGS += -DWINDOWS
endif

!object = |> g++ $(COMPILEFLAGS) -c %f -o %o |> %o
!executable = |> g++ $(COMPILEFLAGS) %f -o %o |> $(OUTPUT)
!lightarchive = |> ar rsT %o %f |> %o

